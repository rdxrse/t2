import{a as d,b as m,j as s,L as f,r as l}from"./index-LfD504bw.js";import{u as g,c as x,f as b,a as y,L as N}from"./use-analitics-e-vgiq4O.js";import{s as L,f as z,L as E}from"./utils-3S3wGsrN.js";const S="_row_1g1zy_1",V="_title__row_1g1zy_13",q="_car__number_1g1zy_29",H="_car__quantity_1g1zy_43",$="_gate__number_1g1zy_57",k="_highlighted_1g1zy_69",A="_gate__notAssigned_1g1zy_79",T="_tj__notAssigned_1g1zy_79",u={row:S,title__row:V,car__number:q,car__quantity:H,gate__number:$,highlighted:k,gate__notAssigned:A,tj__notAssigned:T},D=({carData:r})=>{const{searchValue:e}=d(m(o=>({searchValue:o.searchValue}))),{t,translation:c}=g(),a=L(r.carNumber,e);return console.log("render item"),s.jsx(s.Fragment,{children:s.jsx(f,{to:`/${r.carNumber.toLowerCase()}`,children:s.jsxs("div",{className:u.row,children:[s.jsxs("div",{className:u.car__number,children:[r.carsQuantity!==null&&s.jsx("span",{className:u.car__quantity,children:`${r.carsQuantity}.`}),a.map((o,i)=>s.jsxs(l.Fragment,{children:[i===1?s.jsx("span",{className:u.highlighted,children:e}):i>0&&e,o]},i))]}),r.gateName?s.jsxs("div",{className:u.gate__number,children:["â†’ ",r.gateName]}):s.jsx("div",{className:c!=="tj"?u.gate__notAssigned:u.tj__notAssigned,children:t("wait")})]},r.carsQuantity)})})},C=r=>{l.useEffect(()=>{if(r.current){const e=r.current,t=()=>{e&&(e.scrollHeight-e.scrollTop-e.clientHeight<=1&&(e.scrollTop-=2),e.scrollTop===0&&(e.scrollTop+=2))};return e&&e.addEventListener("scroll",t),()=>{e&&e.removeEventListener("scroll",t)}}},[r])},F=()=>{const{focus:r}=d(m(e=>({focus:e.focus})));l.useEffect(()=>{var t,c;const e=a=>{a.preventDefault()};return r&&((t=document.querySelector("header"))==null||t.addEventListener("touchmove",e),(c=document.querySelector("#search"))==null||c.addEventListener("touchmove",e)),()=>{var a,o;(a=document.querySelector("header"))==null||a.removeEventListener("touchmove",e),(o=document.querySelector("#search"))==null||o.removeEventListener("touchmove",e)}},[r])},M="_content__wrapper_x83fh_1",O="_column__wrapper_x83fh_13",Q="_column_x83fh_13",R="_row_x83fh_59",P="_title__row_x83fh_69",W="_result__wrapper_x83fh_105",B="_one_x83fh_117",G="_result__btn_x83fh_141",_={content__wrapper:M,column__wrapper:O,column:Q,row:R,title__row:P,result__wrapper:W,one:B,result__btn:G},I=l.memo(function(){var w;const{t:e}=g(),t=l.useRef(null),{overflow:c,focus:a,houseData:o,searchValue:i,setOverflow:j}=d(m(n=>({houseData:n.houseData,searchValue:n.searchValue,focus:n.focus,overflow:n.overflow,setOverflow:n.setOverflow}))),h=l.useMemo(()=>z(o,i),[o,i]),v=h&&((w=h[0])==null?void 0:w.carNumber.toLowerCase());return l.useEffect(()=>{setTimeout(()=>{var n;t.current&&((n=t.current)==null||n.scrollTo({top:2}))},0)},[a,i,j]),C(t),F(),s.jsx(s.Fragment,{children:s.jsx("div",{className:_.content__wrapper,children:s.jsx("div",{ref:t,style:{overflow:c},className:_.column__wrapper,children:s.jsxs("div",{onClick:n=>n.stopPropagation(),className:_.column,children:[s.jsxs("div",{className:x(_.title__row,_.row),children:[s.jsx("div",{children:e("table-number")}),s.jsx("div",{children:e("table-gates")})]}),h&&h.map(n=>s.jsx(D,{carData:n},n.carNumber)),h&&h.length===1?s.jsxs("div",{className:a?_.result__wrapper:x(_.result__wrapper,_.one),children:[s.jsx("button",{onMouseDown:n=>n.preventDefault(),className:_.result__btn,children:s.jsx(f,{to:`/${v}`,children:e("search-finded")})}),s.jsx("div",{children:e("search-not-finded")})]}):s.jsx("div",{children:e("search-not-finded")})]})})})})}),J="_search__wrapper_9zdkb_1",K="_search__input_9zdkb_35",U="_highlighted_9zdkb_65",X="_search__info_9zdkb_73",p={search__wrapper:J,search__input:K,highlighted:U,search__info:X},Y=r=>{const{query:e}=r,{t}=g(),{searchValue:c,setSearchValue:a}=d(m(o=>({searchValue:o.searchValue,focusHandler:o.focusHandler,blurHandler:o.blurHandler,setSearchValue:o.setSearchValue})));return s.jsx(s.Fragment,{children:s.jsxs("div",{id:"search",className:p.search__wrapper,children:[s.jsx("input",{type:"number",placeholder:t("search-field"),inputMode:"numeric",pattern:"[0-9]*",className:p.search__input,value:c,onInput:a}),s.jsx("p",{className:p.search__info,children:t("search-notice")}),s.jsx(f,{className:p.search__link,to:`/${e==null?void 0:e.query}/schema`,children:t("search-question")})]})})},Z="_wrapper_veuw4_1",ee={wrapper:Z},ne=()=>{const{houseData:r,fetchHouseData:e}=d(m(c=>({houseData:c.houseData,fetchHouseData:c.fetchHouseData}))),t=b(r);return l.useEffect(()=>{t&&e(t),window.scrollTo({top:0})},[e,t]),y(),s.jsx(N,{children:r&&r.length>=0?s.jsxs("div",{className:ee.wrapper,children:[s.jsx(I,{}),s.jsx(Y,{query:t})]}):s.jsx(E,{})})};export{ne as default};
